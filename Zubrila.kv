#:import hex kivy.utils.get_color_from_hex
#:set  Color_Background hex("#384037")
#:set  Color_Contant hex("#6F8072")
#:set  Color_Button hex("#6F8072")

<OptinButton@Button>:
    background_disabled_normal: ''
    background_normal: ''
    background_down:''
    background_color: Color_Button
    text_size: self.width-sp(50), None
#

<CustomSwitch_Response@Switch>:
    values: ['', '']
    canvas:
        Color:
            # Фон слево
            rgb: hex('#668F00')
        Rectangle:
            size: [sp(41.5), sp(20)]
            pos: [self.center_x - sp(41.5), self.center_y - sp(10)]
        Color:
            # Фон справо
            rgb: hex('#627064')
        Rectangle:
            size: [sp(41.5), sp(20)]
            pos: [self.center_x, self.center_y - sp(10)]

    Image:
        source: '.\ico\keyboard.png'
        pos: [root.center_x - sp(70), root.center_y - sp(50)]

    Image:
        source: '.\ico\option.png'
        pos: [root.center_x - sp(30), root.center_y - sp(50)]
#


<CustomSwitch_Revers@Switch>:
    values: ['', '']
    canvas:
        Color:
            # Фон слево
            rgb: hex('#668F00')
        Rectangle:
            size: [sp(41.5), sp(20)]
            pos: [self.center_x - sp(41.5), self.center_y - sp(10)]
        Color:
            # Фон справо
            rgb: hex('#627064')
        Rectangle:
            size: [sp(41.5), sp(20)]
            pos: [self.center_x, self.center_y - sp(10)]
    #
    Image:
        source: '.\ico\swap_1_2.png'
        pos: [root.center_x - sp(70), root.center_y - sp(50)]
    #
    Image:
        source: '.\ico\swap.png'
        pos: [root.center_x - sp(30), root.center_y - sp(50)]
#



<ButtonSettings@Button>:
    background_color: Color_Background
    background_down:'.\ico\settings_teach.png'
    background_normal:'.\ico\settings.png'
    border:(0, 0, 0, 0)
    size_hint: 0.1,1


<ButtonRefresh@Button>:
    background_color: 0,0,0,0
    canvas.before:

        Color:
            rgba: Color_Button if self.state=='normal' else hex("#73A100")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: hex('#668F00')
    background_down:'.\ico\Qrefresh_teach_1.png'
    background_normal:'.\ico\Qrefresh_1.png'


<FlagButton@Button>:
    size_hint: 1,0.1
    canvas:
        Color:
            # Фон слево
            rgb: hex('#668F00')
        Rectangle:
            size: [sp(41.5), sp(20)]
            pos: [self.center_x - sp(41.5), self.center_y - sp(10)]
    Label:
        # Цвет текста переключателя
        color: hex('#FFFFFF')

    Label:
        # Цвет текста переключателя
        color: hex('#668F00')


<MyTextInput@TextInput>
    font_size: 20
    #background_color: hex('#B9BAB6')
    #mode: "fill"
    #fill_color: hex('#B9BAB6')




<Container>:


    id:rooot

    label_main:label_main0
    textinput_main:textinput_main0
    switch_iput:switch_iput0
    switch_revers: switch_revers0
    button_settings: button_settings0
    button_send:button_send0
    gridlayout_options_response:gridlayout_options_response0
    boxLayout_keyboard:boxLayout_keyboard0

    pagemain:pagemain
    pagesatting:pagesatting

    outputtextflag:outputtextflag0

    label_flag:label_flag0

    button_sewap_pagemain:button_sewap_pagemain0


    butt_send10:butt_send1
    butt_send20:butt_send2
    butt_send30:butt_send3
    butt_send40:butt_send4


    qesetttingss:setttings

    response_flag:response_flag0
    flag_list:flag_list0
    text_input_flag:text_input_flag0



    border:0

    ##!!!
    page:1

    anim_kwargs:{'d': .1, 't': 'in_quad'}




    BoxLayout:
        id:pagemain
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 5


        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size


        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1,0.1



            Image:
                source:'.\ico\RMP5.png'
                #size_hint_y: None
                size_hint_x: None
                #width: 150
                #allow_stretch: True

        BoxLayout:
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: hex("#4C574B")
                RoundedRectangle:
                    pos: self.pos
                    size: self.size


            BoxLayout:
                size_hint: 1,0.1
                #
                Label:
                    id: label_flag0
                    text: "!!!!!!"
                    color: hex("#FFFFFF")
                    size: self.texture_size
                    text_size: self.size
                    font_size: 15
                    halign: "left"
                    padding: 15,5
                #
                ButtonSettings:
                    id: button_settings0
                    #padding: [0,0,10,10]
                    on_release:
                        root.SwapSettings()

            #
            BoxLayout:
                canvas.before:
                    Color:
                        rgba: hex('#6F8072')
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    id: label_main0
                    text: "..."
                    color: hex("#3A4034")
                    font_size: 26
                    size: self.texture_size


            #
            BoxLayout:
                id:boxLayout_keyboard0
                orientation: 'vertical'

                #
                MyTextInput:
                    id: textinput_main0

                    size_hint: 1,0.5
                    #mode: "fill"
                    #fill_color: hex('#B9BAB6')
                    #multiline: False

                    font_size: "20sp"

                    hint_text: "..."

                    padding_x:
                        [self.center[0] - self._get_text_width(max(self._lines, key=len), self.tab_width, self._label_cached) / 2.0,
                        0] if self.text else [self.center[0], 0]
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                #
                OptinButton:
                    id: button_send0
                    size_hint: 1,0.2
                    text:"^"
                    font_size: "20sp"
                    on_release:
                        root.Verify_User_Response()
                #
            GridLayout:
                id: gridlayout_options_response0
                rows:2
                spacing: 5
                height: '0dp'
                size_hint_y: None
                opacity:0


                OptinButton:
                    id: butt_send1
                    text:"1"
                    on_release: root.Verify_User_Options(self.text,butt_send1)
                OptinButton:
                    id: butt_send2
                    text:"2"
                    on_release: root.Verify_User_Options(self.text,butt_send2)
                OptinButton:
                    id: butt_send3
                    text:"3"
                    on_release: root.Verify_User_Options(self.text,butt_send3)
                OptinButton:
                    id: butt_send4
                    text:"4"
                    on_release: root.Verify_User_Options(self.text,butt_send4)
    #



    BoxLayout:
        id:pagesatting
        orientation: 'vertical'

        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 10

        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            id:setttings

            size_hint: 1,0.1
            spacing:10

            OptinButton:
                id:button_sewap_pagemain0
                text:"<"
                on_release: root.SewapPagemain()

            #
            CustomSwitch_Response:
                #size_hint: 0.1,1
                id: switch_iput0
                active: False
                on_active: root.Switch_Response_Method(self, self.active)


            CustomSwitch_Revers:
                id: switch_revers0
                #size_hint: 0.1,1
                active: False
                on_active: root.Switch_Order(self, self.active)


            ButtonRefresh:
                #size_hint: 0.5,1
                on_release: root.Manager_Flags()

            OptinButton:
                text:">"
                on_release: root.SewapWriteFlags()

        BoxLayout:

            canvas.before:
                Color:
                    rgba: Color_Contant
                Rectangle:
                    pos: self.pos
                    size: self.size

            ScrollView:
                do_scroll_x: False
                do_scroll_y: True

                Label:
                    id: flag_list0
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    font_size: 25
                    padding: 10, 10
                    color:hex("#000000")
                    text:""

        BoxLayout:
            size_hint:1,0.1
            MyTextInput:
                id: text_input_flag0
                hint_text:'1, 2 ,3 ... n'

            OptinButton:
                size_hint:0.1,1
                id: response_flag0
                text:"*"
                on_release: root.Selekt_Flag()


    BoxLayout:
        orientation: 'vertical'

        OptinButton:
            size_hint: 1,0.1
            text:"<"
            on_release: root.Settings_SewapWriteFlags()

        MyTextInput:
            id: outputtextflag0
            #background_color: Color_Contant

            hint_text: "(Add new Flag)\n0:Falg\n1:Text One\n2:Text Two\n~~~"


        OptinButton:
            size_hint: 1,0.1
            text:"Save"
            on_release: root.Add_Flag()
