#:import hex kivy.utils.get_color_from_hex

#:set  Color_Background hex("#1E4457")
#:set  Color_Contant hex("#98AEBB")

#:set  Color_Duble hex("#000000")
#:set  Color_Text_Inpyt hex("#000000")
#:set  Color_Button Color_Contant
#:set  Color_Background_Text_Inpyt Color_Button

<LOptinButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: Color_Button
    background_down:'./ico/Qarrow_L.png'
    background_normal:'./ico/Qarrow_L.png'
#

<CButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Background
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,8]#8

    background_disabled_normal: ''
    background_normal: ''
    background_down:''
#
<ROptinButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/Qarrow_R.png'
    background_normal:'./ico/Qarrow_R.png'
#
#
<OptinButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    font_size: '20sp'
    color: Color_Text_Inpyt
    background_disabled_normal: ''
    background_normal: ''
    background_down:''
    text_size: self.width-sp(50), None
#
#
<CustomSwitch_Response@ToggleButton>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/option.png'
    background_normal:'./ico/keyboard.png'
    border:(0, 0, 0, 0)
#
#
<CustomSwitch_Revers@ToggleButton>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/swap_1_2.png'
    background_normal:'./ico/swap.png'
    border:(1, 1, 1, 1)
#
#
<ButtonSettings@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: Color_Background
    background_down:'./ico/settings_teach.png'
    background_normal:'./ico/settings.png'
    size_hint: 0.2,1
    border:(1, 1, 1, 1)
#
#
<ButtonRefresh@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button if self.state=='normal' else hex("#73A100")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: hex('#668F00')
    background_down:'./ico/Qrefresh_teach_1.png'
    background_normal:'./ico/Qrefresh_1.png'
    border:(1, 1, 1, 1)
#
#
<MyTextInput@TextInput>:
    hint_text_color: Color_Background
    foreground_color:Color_Text_Inpyt
    font_size: '26sp'
    multiline: False
#
#
<Container>:
    id:rooot
    label_main:label_main0
    textinput_main:textinput_main0
    switch_iput:switch_iput0
    switch_revers: switch_revers0
    button_settings: button_settings0
    button_send:button_send0
    gridlayout_options_response:gridlayout_options_response0
    boxLayout_keyboard:boxLayout_keyboard0
    pagemain:pagemain
    pagesatting:pagesatting
    label_flag:label_flag0
    button_sewap_pagemain:button_sewap_pagemain0
    butt_send10:butt_send1
    butt_send20:butt_send2
    butt_send30:butt_send3
    butt_send40:butt_send4
    setttings:setttings0


    boxlayout_options_buuton:boxlayout_options_buuton0
    text_question_boxlayout:text_question_boxlayout0
    text_statistic_boxlayout:text_statistic_boxlayout0
    save_flag:save_flag0

    bolvanca_main:bolvanca_main0
    out_flag_0:out_flag_00
    out_flag_1:out_flag_10
    out_flag_2:out_flag_20


    left_swap_node:left_swap_node0
    len_flag_label:len_flag_label0
    right_swap_node:right_swap_node0


    imp_data_text:imp_data_text0
    imp_data_buttun:imp_data_buttun0
    output_data_text:output_data_text0
    output_data_button:output_data_button0


    edit_label_flag:edit_label_flag0
    edit_text_flag:edit_text_flag0
    button_save_edit_flag:button_save_edit_flag0
    button_del_flag_edit:button_del_flag_edit0
    #
    border:0
    #!!
    page:1
    anim_kwargs:{'d': .1, 't': 'in_quad'}
    # PAGE 0
    BoxLayout:
        id:pagemain
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 5
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            spacing:15
            orientation: 'vertical'
            #spacing:10
            canvas.before:
                Color:
                    rgba: Color_Background
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            #
            BoxLayout:
                id:text_statistic_boxlayout0
                size_hint: 1,0.07#!!!
                spacing:15
                #
                Label:
                    size_hint: 0.7,1
                    canvas.before:
                        Color:
                            rgba: Color_Contant
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]#8
                    id: label_flag0
                    text: "!!!!!!"
                    color: Color_Background
                    size: self.texture_size
                    text_size: self.size
                    font_size: '15sp'
                    halign: "left"
                    padding: 15,5
                #
                BoxLayout:
                    canvas:
                        Color:
                            rgba: Color_Background_Text_Inpyt
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [8,]#8
                    Image:
                        source:"./ico/Zubri_log.png"

                ButtonSettings:
                    id: button_settings0
                    #padding: [0,0,10,10]
                    on_release:
                        root.SwapSettings()
            #
            BoxLayout:
                id:text_question_boxlayout0
                size_hint:1, 0.8#!!!
                canvas.before:
                    Color:
                        rgba: Color_Contant
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]#8
                #
                Label:
                    id: label_main0
                    text: "..."
                    color:Color_Text_Inpyt
                    font_size: '26sp'
                    size: self.texture_size
            #
            BoxLayout:
                id:boxLayout_keyboard0
                orientation: 'horizontal'
                size_hint:1, 0.1#!!!
                spacing:10
                #

                Widget:
                    size_hint: 0.001, 0.001


                BoxLayout:
                    #padding:[5,5,5,5]
                    #spacing:1
                    canvas:
                        Color:
                            rgba: Color_Background_Text_Inpyt
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]#8
                    #
                    MyTextInput:
                        id: textinput_main0
                        background_color: 0,0,0,0
                        focus: False
                        on_focus: root.Text_Input_Response_on_focus(self.focus)
                        font_size: "26sp"
                        hint_text: "..."
                        padding_x:[self.center[0] - self._get_text_width(max(self._lines, key=len), self.tab_width, self._label_cached) / 2.0,0] if self.text else [self.center[0]-20, 0]
                        #padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                #
                OptinButton:
                    id: button_send0
                    size_hint: 0.1,1
                    text:"•"
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    font_size: "36sp"
                    colr: Color_Background
                    on_release:
                        root.Verify_User_Response()
            #
            Widget:
                id: bolvanca_main0
                height:'0'
                size_hint_y:None
            #
            GridLayout:
                id: gridlayout_options_response0
                rows:2
                spacing: 5
                height: '0dp'
                size_hint_y: None
                opacity:0
                #
                OptinButton:
                    id: butt_send1
                    text:"1"
                    on_release: root.Verify_User_Options(self.text,butt_send1)
                OptinButton:
                    id: butt_send2
                    text:"2"
                    on_release: root.Verify_User_Options(self.text,butt_send2)
                OptinButton:
                    id: butt_send3
                    text:"3"
                    on_release: root.Verify_User_Options(self.text,butt_send3)
                OptinButton:
                    id: butt_send4
                    text:"4"
                    on_release: root.Verify_User_Options(self.text,butt_send4)
    # PAGE 1
    BoxLayout:
        id:pagesatting
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            id:setttings0
            size_hint: 1,0.123#!!!
            spacing:10
            #
            ROptinButton:
                id:button_sewap_pagemain0
                on_release: root.SewapPagemain()
            #
            CustomSwitch_Response:
                id: switch_iput0
                on_state: root.Switch_Response_Method(self)
            #
            CustomSwitch_Revers:
                id: switch_revers0
                on_state: root.Switch_Order(self)
            #
            ButtonRefresh:
                on_release: root.Manager_Flags()
            #
            LOptinButton:
                on_release: root.SewapWriteFlags()

        #
        BoxLayout:
            id: boxlayout_options_buuton0
            orientation:"vertical"
            size_hint:1,0.8#!!!
            spacing:10
            canvas.before:
                Color:
                    rgba: Color_Contant
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]#8

        BoxLayout:
            size_hint:1,0.1
            spacing:5

            OptinButton:
                id:left_swap_node0
                halign: 'center'
                valign: 'center'
                text_size: self.size
                text:"<"
                opacity: 0
                on_release:
                    root.Swap_Left_List_Flag()




            BoxLayout:
                canvas.before:
                    Color:
                        rgba: Color_Contant
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]#8

                Label:
                    id:len_flag_label0
                    text:"0"
                    color: Color_Background
                    font_size: '25sp'

            OptinButton:
                id:right_swap_node0
                halign: 'center'
                valign: 'center'
                text_size: self.size
                text:">"
                opacity: 0
                on_release:
                    root.Swap_Right_List_Flag()


    # PAGE 2
    BoxLayout:
        orientation: 'vertical'
        spacing:15
        padding: [10,10,10,10]
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            size_hint: 1,0.1
            spacing:10
            #
            ROptinButton:
                size_hint: 0.2,1
                on_release: root.Settings_SewapWriteFlags()
            #
            OptinButton:
                id: save_flag0
                size_hint: 1,1
                font_size: '25sp'
                text:"Добавить слова"
                color: Color_Background
                on_release: root.Add_Flag()
            #
            LOptinButton:
                size_hint: 0.2,1
                on_release: root.Impor_Swapig()

        #
        BoxLayout:
            orientation: 'vertical'
            padding:[5,5,5,5]
            spacing: 15
            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Inpyt
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_00
                    background_color: 0,0,0,0
                    hint_text: "Тема"

            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Inpyt
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_10
                    background_color: 0,0,0,0
                    hint_text: "Слово по Русски"

            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Inpyt
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_20
                    background_color: 0,0,0,0
                    hint_text: "Слово по Английски"

            Widget:

            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Inpyt
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                Image:
                    source:"./ico/Zubri_log.png"

    # PAGE 3
    BoxLayout:
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            size_hint: 1,0.07
            spacing: 15
            ROptinButton:
                size_hint: 0.2,1
                on_release: root.SewapWriteFlags()

            BoxLayout:
                canvas.before:
                    Color:
                        rgba: Color_Contant
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                Label:
                    text:"Синхронизация базы"
                    color: Color_Background
                    font_size: '22sp'



        BoxLayout:
            size_hint: 1,0.3
            canvas:
                Color:
                    rgba: Color_Background_Text_Inpyt
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: imp_data_text0
                background_color: 0,0,0,0
                multiline: True
                hint_text: "Добавить данные в базу (input)\n1) Скопируйте базу слов на другом устройстве\n2) Вставте данные в это текстовое поле\n3) Нажмите (+)"
            BoxLayout:
                padding:[0,10,10,10]
                size_hint:0.1,0.2
                CButton:
                    id: imp_data_buttun0
                    text:"+"
                    font_size:'35sp'
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    color:Color_Contant
                    on_release: root.Set_Data_Flags()


        BoxLayout:
            size_hint: 1,0.3
            canvas:
                Color:
                    rgba: Color_Background_Text_Inpyt
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: output_data_text0
                background_color: 0,0,0,0
                multiline: True
                hint_text: "Копирывать базу слов(output)\n1) Выберете тему в настройках\n2) Нажмите (?) чтобы получить её копию"
            BoxLayout:
                padding:[0,10,10,10]
                size_hint:0.1,0.2
                CButton:
                    id:output_data_button0
                    text:"?"
                    font_size:'35sp'
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    color:Color_Contant
                    on_release: root.Copy_Data_Flags()
    # PAGE 4
    BoxLayout:
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            size_hint: 1,0.1
            canvas:
                Color:
                    rgba: Color_Background_Text_Inpyt
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            Label:
                id: edit_label_flag0
                color:Color_Text_Inpyt
                font_size: '26sp'
                size: self.texture_size


        BoxLayout:
            size_hint: 1,0.8
            canvas:
                Color:
                    rgba: Color_Background_Text_Inpyt
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: edit_text_flag0
                background_color: 0,0,0,0
                multiline: True
        BoxLayout:
            size_hint: 1,0.1
            spacing:15
            OptinButton:
                text:"Назад"
                on_release:root.SwapSettings()
            OptinButton:
                id: button_save_edit_flag0
                text:"Сохранить"
                text_size: self.size
                halign: 'center'
                valign: 'center'
                on_release:root._Save_Edit_Flag()
            OptinButton:
                id: button_del_flag_edit0
                text_size: self.size
                halign: 'center'
                valign: 'center'
                text:"Удалить"
                on_release:root._Delit_Flag_Edit()
