#:import hex kivy.utils.get_color_from_hex

#:set  Color_Background hex("#1E4457")
#:set  Color_Content hex("#98AEBB")

#:set  Color_Double hex("#000000")
#:set  Color_Text_Input hex("#000000")
#:set  Color_Button Color_Content
#:set  Color_Background_Text_Input Color_Button

<LOptionButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: Color_Button
    background_down:'./ico/Qarrow_L.png'
    background_normal:'./ico/Qarrow_L.png'
#

<CButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Background
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,8]#8

    background_disabled_normal: ''
    background_normal: ''
    background_down:''
#
<ROptionButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/Qarrow_R.png'
    background_normal:'./ico/Qarrow_R.png'
#
#
<OptionButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    font_size: '20sp'
    color: Color_Text_Input
    background_disabled_normal: ''
    background_normal: ''
    background_down:''
    text_size: self.width-sp(50), None
#
#
<CustomSwitch_Response@ToggleButton>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/option.png'
    background_normal:'./ico/keyboard.png'
    border:(0, 0, 0, 0)
#
#
<CustomSwitch_Revers@ToggleButton>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]#8
    background_color: Color_Button
    background_down:'./ico/swap_1_2.png'
    background_normal:'./ico/swap.png'
    border:(1, 1, 1, 1)
#
#
<ButtonSettings@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: Color_Background
    background_down:'./ico/settings_teach.png'
    background_normal:'./ico/settings.png'
    size_hint: 0.2,1
    border:(1, 1, 1, 1)
#
#
<ButtonRefresh@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: Color_Button if self.state=='normal' else hex("#73A100")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [8,]
    background_color: hex('#668F00')
    background_down:'./ico/Qrefresh_teach_1.png'
    background_normal:'./ico/Qrefresh_1.png'
    border:(1, 1, 1, 1)
#
#
<MyTextInput@TextInput>:
    hint_text_color: Color_Background
    foreground_color:Color_Text_Input
    font_size: '26sp'
    multiline: False
#
#
<Container>:
    id:rooot
    label_main:label_main0
    text_input_main:text_input_main0
    switch_input:switch_input0
    switch_revers: switch_revers0
    button_settings: button_settings0
    button_send:button_send0
    gridlayout_options_response:gridlayout_options_response0
    box_Layout_keyboard:box_Layout_keyboard0
    page_main:page_main0
    page_setting:page_setting0
    label_flag:label_flag0
    button_swap_page_main:button_swap_page_main0
    butt_send10:butt_send1
    butt_send20:butt_send2
    butt_send30:butt_send3
    butt_send40:butt_send4
    settings:setting0


    box_layout_options_button:box_layout_options_button0
    text_question_box_layout:text_question_box_layout0
    text_statistic_box_layout:text_statistic_box_layout0
    save_flag:save_flag0

    blank_main:blank_main0
    out_flag_0:out_flag_00
    out_flag_1:out_flag_10
    out_flag_2:out_flag_20


    left_swap_node:left_swap_node0
    len_flag_label:len_flag_label0
    right_swap_node:right_swap_node0


    imp_data_text:imp_data_text0
    imp_data_button:imp_data_button0
    output_data_text:output_data_text0
    output_data_button:output_data_button0


    edit_text_input_flag:edit_text_input_flag0
    edit_text_flag:edit_text_flag0
    button_save_edit_flag:button_save_edit_flag0
    button_del_flag_edit:button_del_flag_edit0


    helper_user_button:helper_user_button0

    rename_flag_button:rename_flag_button0
    add_chosen_flag_button:add_chosen_flag_button0
    box_helper:box_helper0

    #
    border:0
    #!!
    page:1
    anim_kwargs:{'d': .1, 't': 'in_quad'}
    # PAGE 0
    BoxLayout:
        id:page_main0
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 5
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            spacing:15
            orientation: 'vertical'
            #spacing:10
            canvas.before:
                Color:
                    rgba: Color_Background
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
            #
            BoxLayout:
                id:text_statistic_box_layout0
                size_hint: 1,0.07#!!!
                spacing:15
                #
                Label:
                    size_hint: 0.7,1
                    canvas.before:
                        Color:
                            rgba: Color_Content
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]#8
                    id: label_flag0
                    text: "!!!!!!"
                    color: Color_Background
                    size: self.texture_size
                    text_size: self.size
                    font_size: '15sp'
                    halign: "left"
                    padding: 15,5
                #

                Image:
                    size_hint: 0.3,1
                    source:"./ico/Zubri_log.png"

                ButtonSettings:
                    id: button_settings0
                    size_hint: 0.2,1
                    #padding: [0,0,10,10]
                    on_release:
                        root.Swap_Settings()
            #
            BoxLayout:
                id:text_question_box_layout0
                size_hint:1, 0.8#!!!
                orientation: "vertical"
                canvas.before:
                    Color:
                        rgba: Color_Content
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]#8

                BoxLayout:
                    size_hint:1,0.15
                    padding:[10,10,10,10]
                    id: box_helper0
                    Button:
                        id:helper_user_button0
                        size_hint:0.1,1
                        background_normal:"./ico/help.png"
                        background_down:"./ico/help_touch.png"
                        border:(1, 1, 1, 1)
                        background_color: Color_Content
                        on_release: root.Help_User_Main(False)

                    Widget:

                    Button:
                        id:add_chosen_flag_button0
                        size_hint:0.1,1
                        background_normal:"./ico/like.png"
                        background_down:"./ico/like_touch.png"
                        border:(1, 1, 1, 1)
                        on_release: root.Add_Chosen_Flag()



                #
                Label:
                    id: label_main0
                    text: "..."
                    color:Color_Text_Input
                    font_size: '26sp'
                    size: self.texture_size
            #
            BoxLayout:
                id:box_Layout_keyboard0
                orientation: 'horizontal'
                size_hint:1, 0.1#!!!
                spacing:10
                #

                Widget:
                    size_hint: 0.001, 0.001


                BoxLayout:
                    #padding:[5,5,5,5]
                    #spacing:1
                    canvas:
                        Color:
                            rgba: Color_Background_Text_Input
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [10,]#8
                    #
                    MyTextInput:
                        id: text_input_main0
                        background_color: 0,0,0,0
                        focus: False
                        on_focus: root.Text_Input_Response_on_focus(self.focus)
                        font_size: "26sp"
                        hint_text: "..."
                        padding_x:[self.center[0] - self._get_text_width(max(self._lines, key=len), self.tab_width, self._label_cached) / 2.0,0] if self.text else [self.center[0]-20, 0]
                        #padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
                #
                OptionButton:
                    id: button_send0
                    size_hint: 0.1,1
                    text:"•"
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    font_size: "36sp"
                    colr: Color_Background
                    on_release:
                        root.Verify_User_Response()
            #
            Widget:
                id: blank_main0
                height:'0'
                size_hint_y:None
            #
            GridLayout:
                id: gridlayout_options_response0
                rows:2
                spacing: 5
                height: '0dp'
                size_hint_y: None
                opacity:0
                #
                OptionButton:
                    id: butt_send1
                    text:"1"
                    on_release: root.Verify_User_Options(self.text,butt_send1)
                OptionButton:
                    id: butt_send2
                    text:"2"
                    on_release: root.Verify_User_Options(self.text,butt_send2)
                OptionButton:
                    id: butt_send3
                    text:"3"
                    on_release: root.Verify_User_Options(self.text,butt_send3)
                OptionButton:
                    id: butt_send4
                    text:"4"
                    on_release: root.Verify_User_Options(self.text,butt_send4)
    # PAGE 1
    BoxLayout:
        id:page_setting0
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            id:setting0
            size_hint: 1,0.123#!!!
            spacing:10
            #
            ROptionButton:
                id:button_swap_page_main0
                on_release: root.Swap_Page_Main()
            #
            CustomSwitch_Response:
                id: switch_input0
                on_state: root.Switch_Response_Method(self)
            #
            CustomSwitch_Revers:
                id: switch_revers0
                on_state: root.Switch_Order(self)
            #
            ButtonRefresh:
                on_release: root.Manager_Flags()
            #
            LOptionButton:
                on_release: root.Swap_Write_Flags()

        #
        BoxLayout:
            id: box_layout_options_button0
            orientation:"vertical"
            size_hint:1,0.8#!!!
            spacing:10
            canvas.before:
                Color:
                    rgba: Color_Content
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10,]#8

        BoxLayout:
            size_hint:1,0.1
            spacing:5

            OptionButton:
                id:left_swap_node0
                halign: 'center'
                valign: 'center'
                text_size: self.size
                text:"<"
                opacity: 0
                on_release:
                    root.Swap_Left_List_Flag()




            BoxLayout:
                canvas.before:
                    Color:
                        rgba: Color_Content
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10,]#8

                Label:
                    id:len_flag_label0
                    text:"0"
                    color: Color_Background
                    font_size: '25sp'

            OptionButton:
                id:right_swap_node0
                halign: 'center'
                valign: 'center'
                text_size: self.size
                text:">"
                opacity: 0
                on_release:
                    root.Swap_Right_List_Flag()


    # PAGE 2
    BoxLayout:
        orientation: 'vertical'
        spacing:15
        padding: [10,10,10,10]
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size
        #
        BoxLayout:
            size_hint: 1,0.1
            spacing:10
            #
            ROptionButton:
                size_hint: 0.2,1
                on_release: root.Settings_SwapWriteFlags()
            #
            OptionButton:
                id: save_flag0
                size_hint: 1,1
                font_size: '25sp'
                text:"Добавить слова"
                color: Color_Background
                on_release: root.Add_Flag()
            #
            LOptionButton:
                size_hint: 0.2,1
                on_release: root.Import_Swapping()

        #
        BoxLayout:
            orientation: 'vertical'
            padding:[5,5,5,5]
            spacing: 15
            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Input
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_00
                    background_color: 0,0,0,0
                    hint_text: "Тема"

            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Input
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_10
                    background_color: 0,0,0,0
                    hint_text: "Слово по Русски"

            BoxLayout:
                size_hint: 1,0.3
                canvas:
                    Color:
                        rgba: Color_Background_Text_Input
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                MyTextInput:
                    id: out_flag_20
                    background_color: 0,0,0,0
                    hint_text: "Слово по Английски"

            Widget:


            Image:
                size_hint: 1,0.3
                source:"./ico/Zubri_log.png"


    # PAGE 3
    BoxLayout:
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            size_hint: 1,0.07
            spacing: 15
            ROptionButton:
                size_hint: 0.2,1
                on_release: root.Swap_Write_Flags()

            BoxLayout:
                canvas.before:
                    Color:
                        rgba: Color_Content
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8
                Label:
                    text:"Синхронизация базы"
                    color: Color_Background
                    font_size: '22sp'



        BoxLayout:
            size_hint: 1,0.3
            canvas:
                Color:
                    rgba: Color_Background_Text_Input
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: imp_data_text0
                background_color: 0,0,0,0
                multiline: True
                hint_text: "Добавить данные в базу (input)\n1) Скопируйте базу слов на другом устройстве\n2) Вставьте данные в это текстовое поле\n3) Нажмите (+)"
            BoxLayout:
                padding:[0,10,10,10]
                size_hint:0.1,0.2
                CButton:
                    id: imp_data_button0
                    text:"+"
                    font_size:'35sp'
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    color:Color_Content
                    on_release: root.Set_Data_Flags()


        BoxLayout:
            size_hint: 1,0.3
            canvas:
                Color:
                    rgba: Color_Background_Text_Input
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: output_data_text0
                background_color: 0,0,0,0
                multiline: True
                hint_text: "Копировать базу слов(output)\n1) Выберете тему в настройках\n2) Нажмите (?) чтобы получить её копию"

            BoxLayout:
                padding:[0,10,10,10]
                size_hint:0.1,0.2
                CButton:
                    id:output_data_button0
                    text:"?"
                    font_size:'35sp'
                    halign: 'center'
                    valign: 'center'
                    text_size: self.size
                    color:Color_Content
                    on_release: root.Copy_Data_Flags()
    # PAGE 4
    BoxLayout:
        orientation: 'vertical'
        padding: [10,10,10,10]
        spacing: 15
        canvas.before:
            Color:
                rgba: Color_Background
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            size_hint: 1,0.1
            spacing: 15

            BoxLayout:
                canvas:
                    Color:
                        rgba: Color_Background_Text_Input
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [8,]#8

                MyTextInput:
                    id: edit_text_input_flag0
                    background_color: 0,0,0,0
                    font_size: '26sp'
                    text_size: self.size
                    halign: 'center'
                    valign: 'bottom'

            OptionButton:
                id: rename_flag_button0
                size_hint: 0.3,1
                text:"Rename Flag"
                text_size: self.size
                halign: 'center'
                valign: 'center'
                on_release: root._Rename_Flag(root.edit_text_input_flag.text)


        BoxLayout:
            size_hint: 1,0.8
            canvas:
                Color:
                    rgba: Color_Background_Text_Input
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8,]#8
            MyTextInput:
                id: edit_text_flag0
                background_color: 0,0,0,0
                multiline: True

        BoxLayout:
            size_hint: 1,0.1
            spacing:15
            OptionButton:
                text:"Назад"
                on_release:root.Swap_Settings()
            OptionButton:
                id: button_save_edit_flag0
                text:"Сохранить"
                text_size: self.size
                halign: 'center'
                valign: 'center'
                on_release:root._Save_Edit_Flag()
            OptionButton:
                id: button_del_flag_edit0
                text_size: self.size
                halign: 'center'
                valign: 'center'
                text:"Удалить"
                on_release:root._Delete_Flag_Edit()
